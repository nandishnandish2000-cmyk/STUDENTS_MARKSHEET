<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Student Marksheet System</title>

    <!-- Google Fonts: Inter for professional look -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Spline Viewer Scripts -->
    <script type="module" src="https://unpkg.com/@splinetool/viewer@1.12.37/build/spline-viewer.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Rajdhani:wght@500&display=swap');

        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        /* Spline Background Styles */
        #spline-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            background: #000000;
            opacity: 1;
            visibility: visible;
            transition: opacity 1.5s ease-in-out;
        }



        spline-viewer {
            position: relative;
            z-index: 1;
        }

        /* Additional Spline watermark hiding via CSS */
        spline-viewer::part(logo),
        spline-viewer [id*="logo"],
        spline-viewer a[href*="spline"],
        #robot-spline::part(logo) {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
        }

        /* Watermark Cover Element - Solid cover to hide badge */
        #spline-watermark-cover {
            position: fixed;
            bottom: 0;
            right: 0;
            width: 260px;
            height: 70px;
            /* Solid color matching the Spline scene's bottom-right corner */
            background: #000000;
            z-index: 10;
            pointer-events: none;
        }

        /* Overlay Text Styles */
        #portal-title {
            position: fixed;
            top: 5%;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            text-align: center;
            width: 100%;
            pointer-events: none;
            opacity: 0;
            transition: opacity 1.5s ease-out;
        }

        #portal-subtitle {
            position: fixed;
            bottom: 5%;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            text-align: center;
            width: 100%;
            pointer-events: none;
            opacity: 0;
            transition: opacity 1.5s ease-out;
        }

        #portal-title.visible,
        #portal-subtitle.visible {
            opacity: 1;
        }

        .title-main {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.8rem;
            font-weight: 700;
            color: #ffffff;
            letter-spacing: 0.15em;
            line-height: 1.2;
            text-shadow: 0 0 30px rgba(0, 200, 255, 0.4);
            background: linear-gradient(to bottom, #ffffff 40%, #a5f3fc 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .highlight-text {
            font-size: 0.8em;
            color: #a5f3fc;
            display: block;
            margin-top: 5px;
        }

        .title-sub {
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.1rem;
            color: #94a3b8;
            letter-spacing: 0.4em;
            text-transform: uppercase;
            position: relative;
            display: inline-block;
        }

        .title-sub::before,
        .title-sub::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 40px;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(148, 163, 184, 0.5), transparent);
        }

        .title-sub::before {
            left: -55px;
        }

        .title-sub::after {
            right: -55px;
        }

        /* Custom Scrollbar for OCR List */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(6, 182, 212, 0.3);
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(6, 182, 212, 0.5);
        }

        /* Glassmorphism for cards to show background */
        .glass-card {
            background: rgba(15, 23, 42, 0.6) !important;
            backdrop-filter: blur(12px) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            color: white !important;
            pointer-events: auto !important;
        }

        /* Home Page Module Animation */
        #homePage .glass-card {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1.2s cubic-bezier(0.4, 0, 0.2, 1), transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        #homePage .glass-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Essential fixes for Spline interaction */
        header,
        main,
        footer {
            position: relative;
            z-index: 10;
            pointer-events: none !important;
            /* Let mouse through to Spline */
        }

        /* Re-enable pointer events for all interactive elements */
        input,
        button,
        a,
        .glass-card,
        select,
        textarea,
        [onclick],
        .sem-btn {
            pointer-events: auto !important;
        }

        /* Global Theme Overrides */
        input:not([type="checkbox"]),
        select {
            background: rgba(15, 23, 42, 0.8) !important;
            border-color: rgba(255, 255, 255, 0.1) !important;
            color: white !important;
        }

        input:focus {
            border-color: #22d3ee !important;
            outline: none !important;
        }

        label {
            color: #94a3b8 !important;
        }

        /* Table Styles */
        table {
            color: white !important;
        }

        th {
            background: rgba(30, 41, 59, 0.8) !important;
            color: #22d3ee !important;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.05em;
        }

        td {
            border-bottom: 1px solid rgba(255, 255, 255, 0.05) !important;
        }

        tr:hover td {
            background: rgba(56, 189, 248, 0.05) !important;
        }

        /* Semester Buttons */
        .sem-btn {
            background: rgba(15, 23, 42, 0.6) !important;
            backdrop-filter: blur(8px) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            transition: all 0.3s ease !important;
        }

        .sem-btn:hover {
            border-color: #22d3ee !important;
            box-shadow: 0 0 20px rgba(34, 211, 238, 0.2) !important;
            transform: translateY(-4px);
        }

        /* Hide titles on other pages to keep clean look */
        /* Circular Progress Styling */
        .progress-ring__circle {
            transition: stroke-dashoffset 0.35s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }

        .confidence-high {
            border-color: rgba(16, 185, 129, 0.4) !important;
        }

        .confidence-low {
            border-color: rgba(245, 158, 11, 0.6) !important;
            background: rgba(245, 158, 11, 0.05) !important;
        }

        /* Animation for pulse */
        @keyframes pulse-cyan {

            0%,
            100% {
                filter: drop-shadow(0 0 5px rgba(34, 211, 238, 0.3));
            }

            50% {
                filter: drop-shadow(0 0 15px rgba(34, 211, 238, 0.6));
            }
        }

        .pulse-loader {
            animation: pulse-cyan 2s infinite;
        }
    </style>
</head>

<body class="bg-black font-sans antialiased text-white min-h-screen flex flex-col overflow-x-hidden">


    <!-- Background Container -->
    <div id="spline-bg">


        <!-- Spline Robot -->
        <spline-viewer id="robot-spline" url="https://prod.spline.design/7C6odspyctbqPdNp/scene.splinecode"
            background="transparent"></spline-viewer>

        <!-- Watermark Cover -->
        <div id="spline-watermark-cover"></div>
    </div>

    <!-- Custom Title Overlays -->
    <div id="portal-title">
        <div class="title-main">
            STUDENTS MARKSHEET<br>
            <span class="highlight-text">WEB - PORTAL</span>
        </div>
    </div>

    <div id="portal-subtitle">
        <div class="title-sub">ADVANCED MANAGEMENT SYSTEM</div>
    </div>

    <!-- Navbar -->
    <header class="bg-slate-900/50 backdrop-blur-md text-white shadow-lg sticky top-0 z-50 border-b border-white/10">
        <div class="container mx-auto px-4 py-3 flex justify-end items-center">
            <!-- Branding removed as requested -->
            <button id="globalLogoutBtn"
                class="hidden bg-indigo-700 hover:bg-indigo-800 px-4 py-1.5 rounded text-sm font-medium transition duration-200 border border-indigo-500">
                Logout
            </button>
        </div>
    </header>

    <main class="container mx-auto flex-grow p-6 relative">
        <!-- Toast Notification -->
        <div id="toast"
            class="fixed top-20 right-5 px-6 py-4 rounded-lg shadow-lg text-white hidden z-50 transition opacity-0 transform translate-y-[-10px]">
        </div>

        <!-- 1. HOME PAGE -->
        <section id="homePage" class="view-section fade-in flex flex-col items-center justify-center h-full mt-24">
            <!-- Central Welcome (More subtle now as background has titles) -->
            <div class="text-center mb-16 opacity-0"> <!-- Hidden as we use the Spline overlays -->
                <h2 class="text-4xl font-bold mb-4 text-white">Welcome</h2>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 w-full max-w-4xl px-4">
                <!-- Student Portal Card -->
                <div class="glass-card p-10 rounded-2xl shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer group text-center"
                    onclick="app.navigateTo('studentLogin')">
                    <div
                        class="w-20 h-20 mx-auto rounded-full bg-cyan-500/10 flex items-center justify-center mb-6 group-hover:bg-cyan-500/20 transition duration-500">
                        <i class="fas fa-user-graduate text-4xl text-cyan-400"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-2 text-white group-hover:text-cyan-400 transition">Student Portal
                    </h3>
                    <p class="text-slate-300 text-sm opacity-80 group-hover:opacity-100 transition">Access your academic
                        records</p>
                </div>

                <!-- Admin Portal Card -->
                <div class="glass-card p-10 rounded-2xl shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer group text-center"
                    onclick="app.navigateTo('adminLogin')">
                    <div
                        class="w-20 h-20 mx-auto rounded-full bg-purple-500/10 flex items-center justify-center mb-6 group-hover:bg-purple-500/20 transition duration-500">
                        <i class="fas fa-user-shield text-4xl text-purple-400"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-2 text-white group-hover:text-purple-400 transition">Admin Portal
                    </h3>
                    <p class="text-slate-300 text-sm opacity-80 group-hover:opacity-100 transition">Manage student
                        records</p>
                </div>
            </div>
        </section>

        <!-- 2. ADMIN LOGIN PAGE -->
        <section id="adminLogin" class="view-section hidden fade-in max-w-md mx-auto w-full mt-24">
            <div class="glass-card p-10 rounded-3xl shadow-2xl">
                <h2 class="text-3xl font-bold mb-8 text-center text-white font-[Orbitron]">Admin Access</h2>
                <form id="adminLoginForm" class="space-y-6">
                    <div>
                        <label class="block text-xs font-bold text-cyan-400/80 mb-3 uppercase tracking-widest">Auth
                            Identifier</label>
                        <input type="text" id="adminUsername"
                            class="w-full bg-slate-900/50 border-slate-700/50 rounded-xl shadow-sm focus:ring-cyan-500 focus:border-cyan-500 p-4 border text-white transition-all font-bold"
                            placeholder="Enter Username" required>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-cyan-400/80 mb-3 uppercase tracking-widest">Secure
                            Key</label>
                        <input type="password" id="adminPassword"
                            class="w-full bg-slate-900/50 border-slate-700/50 rounded-xl shadow-sm focus:ring-cyan-500 focus:border-cyan-500 p-4 border text-white transition-all font-bold"
                            placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
                    </div>
                    <div class="flex justify-between items-center pt-4">
                        <button type="button" class="text-slate-400 hover:text-white text-sm font-medium transition"
                            onclick="app.navigateTo('homePage')">Back</button>
                        <button type="submit"
                            class="bg-blue-600 hover:bg-blue-500 text-white px-10 py-3.5 rounded-xl shadow-[0_0_15px_rgba(37,99,235,0.4)] transition-all font-bold tracking-widest uppercase text-xs">
                            Verify Port
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <!-- 3. ADMIN SEMESTER SELECTION -->
        <section id="adminSemesterSelect" class="view-section hidden fade-in max-w-5xl mx-auto mt-10">
            <div class="flex justify-between items-center mb-10">
                <button onclick="app.navigateTo('homePage')"
                    class="text-slate-400 hover:text-cyan-400 transition flex items-center gap-2 font-medium">
                    <i class="fas fa-arrow-left"></i> Back
                </button>
                <h2 class="text-3xl font-bold text-white tracking-wider uppercase font-[Orbitron]">Select Semester</h2>
                <div class="w-10"></div>
            </div>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-8">
                <button onclick="app.selectAdminSemester('semester_1')" class="sem-btn p-8 rounded-2xl text-left">
                    <span class="text-3xl font-bold text-cyan-400 block mb-1">01</span>
                    <span class="text-slate-300 text-xs uppercase tracking-[0.2em] font-bold">Academic Semester</span>
                </button>
                <button onclick="app.selectAdminSemester('semester_2')" class="sem-btn p-8 rounded-2xl text-left">
                    <span class="text-3xl font-bold text-emerald-400 block mb-1">02</span>
                    <span class="text-slate-300 text-xs uppercase tracking-[0.2em] font-bold">Academic Semester</span>
                </button>
                <button onclick="app.selectAdminSemester('semester_3')" class="sem-btn p-8 rounded-2xl text-left">
                    <span class="text-3xl font-bold text-amber-400 block mb-1">03</span>
                    <span class="text-slate-300 text-xs uppercase tracking-[0.2em] font-bold">Academic Semester</span>
                </button>
                <button onclick="app.selectAdminSemester('semester_4')" class="sem-btn p-8 rounded-2xl text-left">
                    <span class="text-3xl font-bold text-rose-400 block mb-1">04</span>
                    <span class="text-slate-400 text-xs uppercase tracking-[0.2em] font-medium">Academic Semester</span>
                </button>
                <button onclick="app.selectAdminSemester('semester_5')" class="sem-btn p-8 rounded-2xl text-left">
                    <span class="text-3xl font-bold text-purple-400 block mb-1">05</span>
                    <span class="text-slate-400 text-xs uppercase tracking-[0.2em] font-medium">Academic Semester</span>
                </button>
                <button onclick="app.selectAdminSemester('semester_6')" class="sem-btn p-8 rounded-2xl text-left">
                    <span class="text-3xl font-bold text-pink-400 block mb-1">06</span>
                    <span class="text-slate-400 text-xs uppercase tracking-[0.2em] font-medium">Academic Semester</span>
                </button>
            </div>
        </section>

        <!-- 4. ADMIN DASHBOARD -->
        <section id="adminDashboard" class="view-section hidden fade-in max-w-5xl mx-auto mt-6">
            <div class="glass-card flex justify-between items-center mb-8 p-8 rounded-2xl shadow-2xl">
                <div class="flex items-center gap-8">
                    <button onclick="app.navigateTo('adminSemesterSelect')"
                        class="text-slate-400 hover:text-cyan-400 transition text-xl"><i
                            class="fas fa-arrow-left"></i></button>
                    <div>
                        <h2 class="text-2xl font-bold text-white font-[Orbitron]">Control Hub <span
                                class="text-[10px] text-cyan-500 bg-cyan-500/10 px-2 py-0.5 rounded ml-2 border border-cyan-500/20">V2.0</span>
                        </h2>
                        <span id="adminCurrentSemesterDisplay"
                            class="text-cyan-400 text-sm font-bold uppercase tracking-widest mt-1 block"></span>
                    </div>
                </div>
                <div class="flex gap-4">
                    <button onclick="app.loadStudentList()"
                        class="bg-cyan-500/10 text-cyan-400 px-6 py-2.5 rounded-xl hover:bg-cyan-500/20 transition font-bold text-sm border border-cyan-500/30">
                        <i class="fas fa-sync-alt mr-2"></i> Sync
                    </button>
                    <button onclick="app.logout()"
                        class="bg-rose-500/10 text-rose-400 px-6 py-2.5 rounded-xl hover:bg-rose-500/20 transition font-bold text-sm border border-rose-500/30">
                        <i class="fas fa-power-off mr-2"></i> Exit
                    </button>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-10">
                <!-- MODULE 1: MANUAL DEPLOY -->
                <div class="glass-card p-10 rounded-2xl text-center cursor-pointer hover:scale-105 transition-all group border-blue-500/20"
                    onclick="app.navigateToAddStudent()">
                    <div
                        class="text-5xl text-blue-400 mb-6 group-hover:drop-shadow-[0_0_15px_rgba(96,165,250,0.5)] transition">
                        <i class="fas fa-plus-circle"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white uppercase tracking-wider">Deploy Student</h3>
                    <p class="text-slate-400 text-sm mt-2">Initialize new record in database</p>
                </div>

                <!-- MODULE 2: NEURAL OCR UPLOAD -->
                <div class="glass-card p-10 rounded-2xl text-center cursor-pointer hover:scale-105 transition-all group border-purple-500/20 bg-purple-500/5 shadow-[0_0_30px_rgba(168,85,247,0.1)]"
                    onclick="app.navigateTo('uploadMarksheetPage')">
                    <div
                        class="text-5xl text-purple-400 mb-6 group-hover:drop-shadow-[0_0_15px_rgba(192,132,252,0.5)] transition">
                        <i class="fas fa-file-upload"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white uppercase tracking-wider">Upload Marksheet</h3>
                    <p class="text-slate-400 text-sm mt-2">Extract data from image files</p>
                </div>

                <!-- MODULE 3: DATABASE ACCESS -->
                <div class="glass-card p-10 rounded-2xl text-center cursor-pointer hover:scale-105 transition-all group border-emerald-500/20"
                    onclick="app.loadStudentList()">
                    <div
                        class="text-5xl text-emerald-400 mb-6 group-hover:drop-shadow-[0_0_15px_rgba(52,211,153,0.5)] transition">
                        <i class="fas fa-database"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white uppercase tracking-wider">Access Records</h3>
                    <p class="text-slate-400 text-sm mt-2">View and manage centralized flux</p>
                </div>
            </div>
        </section>

        <!-- 4.1 UPLOAD MARKSHEET PAGE - FULL REDESIGN -->
        <section id="uploadMarksheetPage" class="view-section hidden fade-in max-w-7xl mx-auto mt-6">

            <!-- STEP 1: Upload -->
            <div id="uploadStep1" class="glass-card p-10 rounded-2xl shadow-2xl">
                <div class="flex justify-between items-center mb-8 border-b border-white/10 pb-6">
                    <div>
                        <h2 class="text-2xl font-bold text-white font-[Orbitron]">ðŸ“„ Upload Marksheet</h2>
                        <p class="text-slate-400 text-sm mt-1">Upload a marksheet image (JPG, PNG) or PDF â€” we will OCR
                            it and pre-fill the form for you.</p>
                    </div>
                    <button onclick="app.navigateTo('adminDashboard')"
                        class="text-slate-400 hover:text-rose-400 transition flex items-center gap-2 text-sm">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>

                <!-- Drop Zone -->
                <div id="dropZone"
                    class="border-2 border-dashed border-white/10 rounded-2xl p-16 text-center hover:border-cyan-500/50 transition-all cursor-pointer bg-white/5 group"
                    onclick="document.getElementById('marksheetFile').click()"
                    ondragover="event.preventDefault(); this.classList.add('border-cyan-500/70','bg-cyan-500/5')"
                    ondragleave="this.classList.remove('border-cyan-500/70','bg-cyan-500/5')"
                    ondrop="event.preventDefault(); this.classList.remove('border-cyan-500/70','bg-cyan-500/5'); app.handleMarksheetFileDrop(event)">
                    <div class="text-7xl text-slate-500 mb-6 group-hover:text-cyan-500 transition"><i
                            class="fas fa-cloud-upload-alt"></i></div>
                    <h4 class="text-white font-bold text-xl mb-2">Click to browse or Drag & Drop</h4>
                    <p class="text-slate-400 text-sm">Supported: JPG, PNG, JPEG, PDF &nbsp;|&nbsp; Max 10 MB</p>
                    <input type="file" id="marksheetFile" class="hidden" accept="image/*,.pdf"
                        onchange="app.handleMarksheetFileSelect(event)">
                </div>

                <!-- File Preview -->
                <div id="fileInfo" class="hidden mt-6 glass-card p-5 rounded-xl border border-cyan-500/20">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center gap-4">
                            <i class="fas fa-file-image text-cyan-400 text-3xl"></i>
                            <div>
                                <p id="fileName" class="text-white font-bold text-sm"></p>
                                <p id="fileSize" class="text-slate-400 text-xs mt-0.5"></p>
                            </div>
                        </div>
                        <button id="extractBtn" onclick="app.processMarksheet()"
                            class="bg-cyan-600 hover:bg-cyan-500 text-white px-8 py-3 rounded-xl font-bold transition-all text-sm uppercase tracking-widest flex items-center gap-2">
                            <i class="fas fa-brain"></i> Run OCR & Extract Data
                        </button>
                    </div>
                    <!-- Thumbnail preview in step 1 -->
                    <div id="uploadImagePreview1" class="hidden mt-4">
                        <img id="uploadPreviewImg1" src="" alt="Preview"
                            class="max-h-56 mx-auto rounded-xl border border-white/10 object-contain">
                    </div>
                </div>
            </div>

            <!-- STEP 1.5: OCR Loading Spinner (Premium Circular) -->
            <div id="extractionLoader" class="hidden glass-card p-20 rounded-3xl shadow-2xl text-center">
                <div class="relative inline-block mb-8">
                    <svg class="w-32 h-32 pulse-loader">
                        <circle class="text-slate-800" stroke-width="8" stroke="currentColor" fill="transparent" r="58"
                            cx="64" cy="64" />
                        <circle id="ocrProgressCircle" class="text-cyan-500 progress-ring__circle" stroke-width="8"
                            stroke-dasharray="364.4" stroke-dashoffset="364.4" stroke-linecap="round"
                            stroke="currentColor" fill="transparent" r="58" cx="64" cy="64" />
                    </svg>
                    <div class="absolute inset-0 flex items-center justify-center">
                        <span id="ocrPercentVal" class="text-2xl font-bold text-white font-[Orbitron]">0%</span>
                    </div>
                </div>
                <p class="text-white font-bold font-[Orbitron] text-xl tracking-widest uppercase">Analyzing Matrix...
                </p>
                <p id="ocrProgressText" class="text-slate-500 text-sm mt-4">Initializing neural engine...</p>

                <div class="mt-12 flex justify-center gap-2">
                    <span class="w-2 h-2 rounded-full bg-cyan-500 animate-bounce" style="animation-delay: 0.1s"></span>
                    <span class="w-2 h-2 rounded-full bg-cyan-500 animate-bounce" style="animation-delay: 0.2s"></span>
                    <span class="w-2 h-2 rounded-full bg-cyan-500 animate-bounce" style="animation-delay: 0.3s"></span>
                </div>
            </div>

            <!-- STEP 2: Review & Edit (Premium Layout) -->
            <div id="uploadStep2" class="hidden space-y-6">

                <!-- OCR Summary Bar -->
                <div
                    class="glass-row flex items-center justify-between p-6 rounded-2xl border border-white/10 bg-white/5">
                    <div class="flex items-center gap-5">
                        <div class="w-12 h-12 rounded-xl bg-cyan-500/20 flex items-center justify-center text-cyan-400">
                            <i class="fas fa-microchip text-xl"></i>
                        </div>
                        <div>
                            <h4 class="text-white font-bold uppercase tracking-widest text-sm">Extraction Complete</h4>
                            <div class="flex items-center gap-3 mt-1">
                                <span class="text-xs text-slate-400">Scan Confidence:</span>
                                <div class="w-32 h-1.5 bg-slate-800 rounded-full overflow-hidden">
                                    <div id="confidenceBar" class="h-full bg-emerald-500 transition-all duration-1000"
                                        style="width: 0%"></div>
                                </div>
                                <span id="confidencePercent" class="text-[10px] font-bold text-emerald-400">0%</span>
                            </div>
                        </div>
                    </div>
                    <button onclick="app.cancelUpload()"
                        class="text-slate-500 hover:text-rose-400 transition-all font-bold text-xs uppercase tracking-widest">
                        <i class="fas fa-times-circle mr-2"></i> Discard Stream
                    </button>
                </div>

                <!-- Low confidence warning (shown by JS) -->
                <div id="lowConfidenceWarning"
                    class="hidden glass-card p-4 rounded-2xl border border-amber-500/40 flex items-center gap-4">
                    <i class="fas fa-exclamation-triangle text-amber-400 text-xl flex-shrink-0"></i>
                    <p id="lowConfidenceText" class="text-amber-300 text-sm"></p>
                </div>

                <!-- Image Preview + Raw OCR Text side-by-side -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-5">
                    <!-- Left: Uploaded Image -->
                    <div class="glass-card p-6 rounded-2xl">
                        <h3
                            class="text-xs font-bold uppercase tracking-widest text-slate-400 mb-4 flex items-center gap-2">
                            <i class="fas fa-image text-cyan-400"></i> Uploaded Marksheet (Original)
                        </h3>
                        <div
                            class="bg-slate-900/80 rounded-xl flex items-center justify-center min-h-52 border border-white/5 p-2">
                            <img id="uploadedMarksheetPreview" src="" alt="Uploaded Marksheet"
                                class="max-w-full max-h-80 object-contain rounded-lg">
                        </div>
                    </div>
                    <!-- Right: Raw OCR Text -->
                    <div class="glass-card p-6 rounded-2xl">
                        <div class="flex justify-between items-center mb-4">
                            <h3
                                class="text-xs font-bold uppercase tracking-widest text-slate-400 flex items-center gap-2">
                                <i class="fas fa-align-left text-purple-400"></i> Raw OCR Output
                            </h3>
                            <span class="text-xs text-amber-400 font-bold"><i
                                    class="fas fa-lightbulb mr-1"></i>Reference â€” use this to fill the form</span>
                        </div>
                        <div
                            class="bg-slate-900/80 rounded-xl p-4 max-h-80 overflow-y-auto custom-scrollbar border border-white/5">
                            <pre id="rawOcrText"
                                class="text-slate-300 text-xs font-mono whitespace-pre-wrap leading-relaxed"></pre>
                        </div>
                    </div>
                </div>

                <!-- Editable Verification Form -->
                <div class="glass-card p-8 rounded-2xl">
                    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
                        <div>
                            <h3
                                class="text-base font-bold text-white uppercase tracking-widest mb-1 flex items-center gap-3">
                                <i class="fas fa-edit text-cyan-400"></i> Verify & Edit Extracted Data
                            </h3>
                            <p class="text-slate-500 text-xs">All fields are auto-filled from OCR. Correct any errors
                                before saving.</p>
                        </div>
                        <div class="flex items-center gap-3 bg-slate-900/50 p-3 rounded-xl border border-white/5">
                            <div class="flex flex-col items-end">
                                <span class="text-[9px] uppercase tracking-widest text-slate-500 font-bold">Extraction
                                    Engine</span>
                                <span id="ocrEngineBadge"
                                    class="text-[11px] font-bold text-cyan-400 font-[Orbitron]">Initializing
                                    System...</span>
                            </div>
                            <div class="w-8 h-8 rounded-lg bg-cyan-500/10 flex items-center justify-center">
                                <i class="fas fa-microchip text-cyan-400"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Row 1: Name + Reg No -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label class="block text-xs font-bold uppercase tracking-widest text-cyan-400 mb-2">
                                <i class="fas fa-user mr-1"></i> Student Name <span class="text-rose-400">*</span>
                            </label>
                            <input type="text" id="extractedName"
                                class="w-full bg-slate-900 border border-slate-700 rounded-xl p-4 text-white focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all font-bold text-base"
                                placeholder="Enter student full name">
                        </div>
                        <div>
                            <label class="block text-xs font-bold uppercase tracking-widest text-cyan-400 mb-2">
                                <i class="fas fa-id-card mr-1"></i> Register Number <span class="text-rose-400">*</span>
                            </label>
                            <input type="text" id="extractedRegNo"
                                class="w-full bg-slate-900 border border-slate-700 rounded-xl p-4 text-white focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all font-mono font-bold text-base"
                                placeholder="e.g. 21CS001">
                        </div>
                    </div>

                    <!-- Row 2: Total Marks + Overall Result -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                        <div>
                            <div class="flex justify-between items-center mb-3">
                                <label class="block text-xs font-bold uppercase tracking-widest text-cyan-400">
                                    <i class="fas fa-sigma mr-1"></i> Total Marks
                                </label>
                                <button type="button" onclick="app.recalculateTotal()"
                                    class="text-[10px] font-bold text-cyan-400 hover:text-white transition-all">
                                    <i class="fas fa-sync-alt mr-1"></i> Recalculate
                                </button>
                            </div>
                            <input type="text" id="extractedTotalMarks"
                                class="w-full bg-slate-900 border border-slate-700 rounded-xl p-4 text-white focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all font-mono font-bold text-xl"
                                placeholder="Auto-calculated">
                        </div>
                        <div>
                            <label class="block text-xs font-bold uppercase tracking-widest text-cyan-400 mb-3">
                                <i class="fas fa-award mr-1"></i> Final Result
                            </label>
                            <select id="extractedOverallResult"
                                class="w-full bg-slate-900 border border-slate-700 rounded-xl p-4 text-white focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all font-bold text-base">
                                <option value="">â€” Select Result â€”</option>
                                <option value="PASS" class="text-emerald-400 font-bold">PASS</option>
                                <option value="FAIL" class="text-rose-400 font-bold">FAIL</option>
                            </select>
                        </div>
                    </div>

                    <!-- Subjects Table -->
                    <div class="border-t border-white/10 pt-6">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="text-sm font-bold text-white uppercase tracking-widest flex items-center gap-2">
                                <i class="fas fa-table text-emerald-400"></i> Subjects & Marks
                            </h4>
                            <button type="button" onclick="app.addExtractedSubjectRow()"
                                class="text-xs bg-cyan-500/10 text-cyan-400 px-5 py-2.5 rounded-xl hover:bg-cyan-500/20 border border-cyan-500/30 transition-all font-bold flex items-center gap-2">
                                <i class="fas fa-plus-circle"></i> Add Row
                            </button>
                        </div>

                        <!-- Column headers -->
                        <div
                            class="hidden md:grid grid-cols-[1fr_120px_120px] gap-3 px-2 mb-2 text-[10px] font-bold uppercase tracking-widest text-slate-500">
                            <div>Subject Name</div>
                            <div class="text-center">Marks Obtained</div>
                            <div class="text-center">Result</div>
                        </div>

                        <div id="extractedSubjectsContainer"
                            class="space-y-3 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar">
                            <!-- JS inserts rows here -->
                        </div>

                        <div id="noSubjectsHint"
                            class="hidden text-center text-slate-500 text-sm py-8 border border-dashed border-white/10 rounded-xl mt-3">
                            <i class="fas fa-exclamation-triangle mr-2 text-amber-400"></i>
                            No subjects were auto-detected. Look at the raw OCR text above and add rows manually using
                            the button.
                        </div>
                    </div>

                    <!-- Final Action Row -->
                    <div class="flex justify-end gap-5 mt-10">
                        <button onclick="app.cancelUpload()"
                            class="px-8 py-4 rounded-xl border border-white/10 hover:bg-white/5 transition-all text-xs font-bold uppercase tracking-widest text-slate-400">
                            Cancel Post
                        </button>
                        <button onclick="app.saveExtractedData()"
                            class="px-12 py-4 rounded-xl bg-emerald-600 hover:bg-emerald-500 text-white shadow-lg shadow-emerald-900/40 transition-all text-xs font-bold uppercase tracking-widest flex items-center gap-3">
                            <i class="fas fa-database"></i> Commit to Matrix
                        </button>
                    </div>
                </div>
        </section>


        </section>


        <!-- 5. ADD STUDENT PAGE -->
        <section id="addStudentPage" class="view-section hidden fade-in max-w-3xl mx-auto mt-6">
            <div class="glass-card p-10 rounded-2xl shadow-2xl">
                <div class="flex justify-between items-center mb-10 border-b border-white/10 pb-6">
                    <h2 class="text-2xl font-bold text-white font-[Orbitron]">Initialize Subject</h2>
                    <button onclick="app.navigateTo('adminDashboard')"
                        class="text-slate-400 hover:text-rose-400 transition flex items-center gap-2"><i
                            class="fas fa-times"></i> Cancel</button>
                </div>
                <form id="addStudentForm" class="space-y-8">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <label class="block text-xs font-bold uppercase tracking-widest text-slate-400 mb-2">Access
                                Identity Name</label>
                            <input type="text" id="addName"
                                class="w-full bg-slate-900 border-slate-700 rounded-xl p-4 text-white focus:ring-cyan-500 focus:border-cyan-500 transition-all"
                                placeholder="Student Full Name" required>
                        </div>
                        <div>
                            <label class="block text-xs font-bold uppercase tracking-widest text-slate-400 mb-2">System
                                Register Serial</label>
                            <input type="text" id="addRegNo"
                                class="w-full bg-slate-900 border-slate-700 rounded-xl p-4 text-white focus:ring-cyan-500 focus:border-cyan-500 transition-all font-mono"
                                placeholder="REG-123456" required>
                        </div>
                    </div>

                    <div class="border-t border-white/10 pt-8">
                        <div class="flex justify-between items-center mb-6">
                            <label class="block text-sm font-bold text-slate-300 tracking-widest uppercase">Data Nodes
                                (Subjects)</label>
                            <button type="button" onclick="app.addSubjectRow('addSubjectsContainer')"
                                class="text-xs bg-cyan-500/10 text-cyan-400 px-4 py-2 rounded-xl hover:bg-cyan-500/20 border border-cyan-500/30 transition-all font-bold">
                                <i class="fas fa-plus-circle mr-2"></i> Inject Node
                            </button>
                        </div>
                        <div id="addSubjectsContainer" class="space-y-4 max-h-80 overflow-y-auto pr-3 custom-scrollbar">
                            <!-- Dynamic Subject Rows -->
                        </div>
                    </div>

                    <div class="flex justify-end gap-4 mt-8 pt-6 border-t border-white/10">
                        <button type="submit"
                            class="bg-cyan-600 hover:bg-cyan-500 text-white px-10 py-4 rounded-xl shadow-[0_0_20px_rgba(8,145,178,0.3)] transition-all font-bold uppercase tracking-widest text-xs">
                            Commit Registry
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <!-- 6. STUDENT LIST PAGE -->
        <section id="studentListPage" class="view-section hidden fade-in max-w-6xl mx-auto mt-6">
            <div class="flex justify-between items-center mb-10">
                <button onclick="app.navigateTo('adminDashboard')"
                    class="text-slate-400 hover:text-cyan-400 transition flex items-center gap-3 font-bold uppercase tracking-widest text-xs">
                    <i class="fas fa-chevron-left"></i> Core Hub
                </button>
                <div class="flex items-center gap-4">
                    <button onclick="app.navigateTo('uploadMarksheetPage')"
                        class="bg-purple-500/10 text-purple-400 px-5 py-2 rounded-xl hover:bg-purple-500/20 transition font-bold text-xs border border-purple-500/30 uppercase tracking-widest whitespace-nowrap">
                        <i class="fas fa-file-upload mr-2"></i> Upload Marksheet
                    </button>
                    <div class="text-right">
                        <h2 class="text-2xl font-bold text-white font-[Orbitron]">Matrix Records</h2>
                        <span id="listSemesterDisplay"
                            class="text-xs text-cyan-400 uppercase font-bold tracking-[0.3em] mt-1 block"></span>
                    </div>
                </div>
            </div>

            <div class="glass-card rounded-2xl shadow-2xl overflow-hidden border border-white/10">
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-white/5">
                        <thead>
                            <tr>
                                <th
                                    class="px-8 py-5 text-left text-xs font-bold uppercase tracking-widest text-cyan-400/80">
                                    System SID
                                </th>
                                <th
                                    class="px-8 py-5 text-left text-xs font-bold uppercase tracking-widest text-cyan-400/80">
                                    Entity Name
                                </th>
                                <th
                                    class="px-8 py-5 text-center text-xs font-bold uppercase tracking-widest text-cyan-400/80">
                                    Nodes
                                </th>
                                <th
                                    class="px-8 py-5 text-center text-xs font-bold uppercase tracking-widest text-cyan-400/80">
                                    Total
                                </th>
                                <th
                                    class="px-8 py-5 text-center text-xs font-bold uppercase tracking-widest text-cyan-400/80">
                                    Result
                                </th>
                                <th
                                    class="px-8 py-5 text-right text-xs font-bold uppercase tracking-widest text-cyan-400/80">
                                    Execute
                                </th>
                            </tr>
                        </thead>
                        <tbody id="studentListBody" class="divide-y divide-white/5">
                            <!-- Dynamic content -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- 7. EDIT STUDENT PAGE -->
        <section id="editStudentPage" class="view-section hidden fade-in max-w-3xl mx-auto mt-6">
            <div class="glass-card p-10 rounded-2xl shadow-2xl">
                <div class="flex justify-between items-center mb-10 border-b border-white/10 pb-6">
                    <h2 class="text-2xl font-bold text-white font-[Orbitron]">Edit Node Data</h2>
                    <button onclick="app.loadStudentList()"
                        class="text-slate-400 hover:text-rose-400 transition flex items-center gap-2"><i
                            class="fas fa-times"></i> Cancel</button>
                </div>
                <form id="editStudentForm" class="space-y-8">
                    <input type="hidden" id="editStudentId">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div>
                            <label class="block text-xs font-bold uppercase tracking-widest text-slate-400 mb-2">Matrix
                                Name</label>
                            <input type="text" id="editName"
                                class="w-full bg-slate-900 border-slate-700 rounded-xl p-4 text-white focus:ring-cyan-500 focus:border-cyan-500 transition-all"
                                required>
                        </div>
                        <div>
                            <label class="block text-xs font-bold uppercase tracking-widest text-slate-400 mb-2">System
                                Register Serial</label>
                            <input type="text" id="editRegNo"
                                class="w-full bg-slate-900 border-slate-700 rounded-xl p-4 text-white focus:ring-cyan-500 focus:border-cyan-500 transition-all font-mono"
                                required>
                        </div>
                    </div>

                    <div class="border-t border-white/10 pt-8">
                        <div class="flex justify-between items-center mb-6">
                            <label class="block text-sm font-bold text-slate-300 tracking-widest uppercase">Node
                                Configuration</label>
                            <button type="button" onclick="app.addSubjectRow('editSubjectsContainer')"
                                class="text-xs bg-cyan-500/10 text-cyan-400 px-4 py-2 rounded-xl hover:bg-cyan-500/20 border border-cyan-500/30 transition-all font-bold">
                                <i class="fas fa-plus-circle mr-2"></i> Add Layer
                            </button>
                        </div>
                        <div id="editSubjectsContainer"
                            class="space-y-4 max-h-80 overflow-y-auto pr-3 custom-scrollbar">
                            <!-- Dynamic Subject Rows -->
                        </div>
                    </div>

                    <div class="flex justify-end gap-4 mt-8 pt-6 border-t border-white/10">
                        <button type="submit"
                            class="bg-indigo-600 hover:bg-indigo-500 text-white px-10 py-4 rounded-xl shadow-[0_0_20px_rgba(79,70,229,0.3)] transition-all font-bold uppercase tracking-widest text-xs">
                            Update Registry
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <!-- 8. VIEW STUDENT PAGE (READ ONLY) -->
        <section id="adminViewStudentPage" class="view-section hidden fade-in max-w-4xl mx-auto mt-6">
            <div class="glass-card p-12 rounded-2xl shadow-2xl relative border border-white/10">
                <div class="flex justify-between items-center mb-10 border-b border-white/10 pb-8">
                    <h2 class="text-3xl font-bold text-white font-[Orbitron]">Node Analysis</h2>
                    <button onclick="app.loadStudentList()"
                        class="text-slate-400 hover:text-cyan-400 transition flex items-center gap-3 text-xs font-bold uppercase tracking-widest">
                        <i class="fas fa-chevron-left"></i> Flux Stream
                    </button>
                </div>

                <div class="grid grid-cols-2 gap-12 mb-12">
                    <div>
                        <span class="block text-xs font-bold text-slate-400 uppercase tracking-[0.3em] mb-3">Entity
                            Descriptor</span>
                        <span id="viewStudentName" class="text-2xl font-bold text-white tracking-wide block"></span>
                    </div>
                    <div>
                        <span class="block text-xs font-bold text-slate-400 uppercase tracking-[0.3em] mb-3">Registry
                            Index</span>
                        <span id="viewStudentRegNo"
                            class="text-2xl font-bold text-cyan-400 font-mono tracking-widest block"></span>
                    </div>
                </div>

                <div class="glass-card bg-slate-900/40 rounded-xl overflow-hidden border border-white/5">
                    <table class="min-w-full divide-y divide-white/5">
                        <thead class="bg-white/5">
                            <tr>
                                <th
                                    class="px-6 py-4 text-left text-[10px] font-bold text-cyan-400 uppercase tracking-widest">
                                    Descriptor</th>
                                <th
                                    class="px-6 py-4 text-left text-[10px] font-bold text-cyan-400 uppercase tracking-widest">
                                    Proto</th>
                                <th
                                    class="px-6 py-4 text-center text-[10px] font-bold text-cyan-400 uppercase tracking-widest">
                                    Max EXT</th>
                                <th
                                    class="px-6 py-4 text-center text-[10px] font-bold text-cyan-400 uppercase tracking-widest">
                                    INT</th>
                                <th
                                    class="px-6 py-4 text-center text-[10px] font-bold text-cyan-400 uppercase tracking-widest">
                                    EXT</th>
                                <th
                                    class="px-6 py-4 text-center text-[10px] font-bold text-cyan-400 uppercase tracking-widest">
                                    VAL</th>
                                <th
                                    class="px-6 py-4 text-center text-[10px] font-bold text-cyan-400 uppercase tracking-widest">
                                    STATUS</th>
                            </tr>
                        </thead>
                        <tbody id="viewStudentSubjectsBody" class="divide-y divide-white/5 text-slate-300">
                            <!-- Dynamic Rows -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- 9. STUDENT LOGIN PAGE -->
        <section id="studentLogin" class="view-section hidden fade-in max-w-md mx-auto w-full mt-24">
            <div class="glass-card p-10 rounded-3xl shadow-2xl">
                <h2 class="text-3xl font-bold mb-8 text-center text-white font-[Orbitron]">Student Portal</h2>
                <form id="studentLoginForm" class="space-y-6">
                    <div>
                        <label class="block text-xs font-bold text-slate-400 mb-2 uppercase tracking-widest">Entry
                            Name</label>
                        <input type="text" id="studentLoginName"
                            class="w-full bg-slate-900/50 border-slate-700 rounded-xl p-4 text-white focus:ring-cyan-500 focus:border-cyan-500 transition-all"
                            placeholder="Your Legal Name" required>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-400 mb-2 uppercase tracking-widest">Matrix
                            Identifier (Reg No)</label>
                        <input type="text" id="studentLoginRegNo"
                            class="w-full bg-slate-900/50 border-slate-700 rounded-xl p-4 text-white focus:ring-cyan-500 focus:border-cyan-500 transition-all font-mono"
                            placeholder="SYSTEM-0000" required>
                    </div>
                    <div class="flex justify-between items-center pt-6">
                        <button type="button" class="text-slate-400 hover:text-white text-sm font-medium transition"
                            onclick="app.navigateTo('homePage')">Main Menu</button>
                        <button type="submit"
                            class="bg-indigo-600 hover:bg-indigo-500 text-white px-10 py-4 rounded-xl shadow-[0_0_20px_rgba(79,70,229,0.3)] transition-all font-bold uppercase tracking-widest text-xs">
                            Sync Identity
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <!-- 9. STUDENT SEMESTER SELECTION -->
        <section id="studentSemesterSelect" class="view-section hidden fade-in max-w-5xl mx-auto mt-10">
            <div class="flex justify-between items-center mb-10 border-b border-white/10 pb-8">
                <button onclick="app.logout()"
                    class="text-rose-400 hover:text-rose-300 transition flex items-center gap-3 font-bold uppercase tracking-widest text-xs">
                    <i class="fas fa-power-off"></i> Disconnect
                </button>
                <div class="text-right">
                    <h2 class="text-2xl font-bold text-white font-[Orbitron]">Identity Matrix</h2>
                    <p class="text-xs text-slate-300 mt-2 uppercase tracking-widest">Active Core: <span
                            id="welcomeStudentName"
                            class="font-bold text-cyan-400 drop-shadow-[0_0_8px_rgba(34,211,238,0.4)]"></span></p>
                </div>
            </div>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-8">
                <button onclick="app.viewMarksheet('semester_1')" class="sem-btn p-8 rounded-2xl text-left">
                    <span class="sem-number text-3xl font-bold text-cyan-400 block mb-1">01</span>
                    <span class="sem-label text-slate-400 text-xs uppercase tracking-[0.2em] font-medium">Data
                        Semester</span>
                </button>
                <button onclick="app.viewMarksheet('semester_2')" class="sem-btn p-8 rounded-2xl text-left">
                    <span class="sem-number text-3xl font-bold text-emerald-400 block mb-1">02</span>
                    <span class="sem-label text-slate-400 text-xs uppercase tracking-[0.2em] font-medium">Data
                        Semester</span>
                </button>
                <button onclick="app.viewMarksheet('semester_3')" class="sem-btn p-8 rounded-2xl text-left">
                    <span class="sem-number text-3xl font-bold text-amber-400 block mb-1">03</span>
                    <span class="sem-label text-slate-400 text-xs uppercase tracking-[0.2em] font-medium">Data
                        Semester</span>
                </button>
                <button onclick="app.viewMarksheet('semester_4')" class="sem-btn p-8 rounded-2xl text-left">
                    <span class="sem-number text-3xl font-bold text-rose-400 block mb-1">04</span>
                    <span class="sem-label text-slate-400 text-xs uppercase tracking-[0.2em] font-medium">Data
                        Semester</span>
                </button>
                <button onclick="app.viewMarksheet('semester_5')" class="sem-btn p-8 rounded-2xl text-left">
                    <span class="sem-number text-3xl font-bold text-purple-400 block mb-1">05</span>
                    <span class="sem-label text-slate-400 text-xs uppercase tracking-[0.2em] font-medium">Data
                        Semester</span>
                </button>
                <button onclick="app.viewMarksheet('semester_6')" class="sem-btn p-8 rounded-2xl text-left">
                    <span class="sem-number text-3xl font-bold text-pink-400 block mb-1">06</span>
                    <span class="sem-label text-slate-400 text-xs uppercase tracking-[0.2em] font-medium">Data
                        Semester</span>
                </button>
            </div>

            <!-- Overall Conclusion Prompt -->
            <div class="mt-12 group">
                <button onclick="app.viewOverallConclusion()"
                    class="w-full glass-card p-10 rounded-2xl border-cyan-500/30 hover:border-cyan-400 transition-all duration-500 flex items-center justify-between group overflow-hidden relative">
                    <div
                        class="absolute inset-0 bg-gradient-to-r from-cyan-500/5 to-indigo-500/5 opacity-0 group-hover:opacity-100 transition-opacity">
                    </div>
                    <div class="relative z-10 flex items-center gap-8">
                        <div
                            class="w-20 h-20 rounded-2xl bg-cyan-500/10 flex items-center justify-center border border-cyan-500/20 group-hover:scale-110 transition-transform duration-500 shadow-[0_0_20px_rgba(34,211,238,0.1)]">
                            <i class="fas fa-brain text-4xl text-cyan-400"></i>
                        </div>
                        <div class="text-left">
                            <h3 class="text-2xl font-bold text-white font-[Orbitron] tracking-widest">OVERALL CONCLUSION
                            </h3>
                            <p class="text-slate-400 text-sm mt-2 uppercase tracking-[0.2em]">Comprehensive Neural
                                Analysis Across All Semesters</p>
                        </div>
                    </div>
                    <div
                        class="relative z-10 text-cyan-400 text-2xl group-hover:translate-x-4 transition-transform duration-500">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </button>
            </div>
        </section>

        <!-- 11. OVERALL CONCLUSION VIEW -->
        <section id="overallConclusion" class="view-section hidden fade-in max-w-6xl mx-auto mt-6 mb-20">
            <div class="flex justify-between items-center mb-10 border-b border-white/10 pb-8">
                <button onclick="app.navigateTo('studentSemesterSelect')"
                    class="text-slate-400 hover:text-cyan-400 transition flex items-center gap-3 font-bold uppercase tracking-widest text-xs">
                    <i class="fas fa-chevron-left"></i> Semester Hub
                </button>
                <div class="text-right">
                    <h2 class="text-3xl font-bold text-white font-[Orbitron] tracking-tighter">COGNITIVE SUMMARY</h2>
                </div>

                <!-- Confidence Bar -->

                <!-- Dashboard Stats -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-10">
                    <div class="glass-card p-8 rounded-2xl text-center border-white/5">
                        <span class="text-[10px] text-slate-400 uppercase font-black tracking-[0.3em] block mb-4">Core
                            Efficiency</span>
                        <span id="overallCorePercent" class="text-4xl font-bold text-white font-[Orbitron]">--%</span>
                    </div>
                    <div class="glass-card p-8 rounded-2xl text-center border-white/5">
                        <span class="text-[10px] text-slate-400 uppercase font-black tracking-[0.3em] block mb-4">Total
                            Nodes</span>
                        <span id="overallTotalSubjects"
                            class="text-4xl font-bold text-cyan-400 font-[Orbitron]">--</span>
                    </div>
                    <div class="glass-card p-8 rounded-2xl text-center border-white/5">
                        <span class="text-[10px] text-slate-400 uppercase font-black tracking-[0.3em] block mb-4">Core
                            Credits</span>
                        <span id="overallCoreCount" class="text-4xl font-bold text-indigo-400 font-[Orbitron]">--</span>
                    </div>
                    <div class="glass-card p-8 rounded-2xl text-center border-white/5">
                        <span
                            class="text-[10px] text-slate-400 uppercase font-black tracking-[0.3em] block mb-4">Status</span>
                        <span id="overallFinalStatus"
                            class="text-2xl font-bold text-emerald-400 font-[Orbitron] mt-1 block">ACTIVE</span>
                    </div>
                </div>

                <!-- Career Path / Insights -->
                <div
                    class="glass-card p-10 rounded-2xl mb-10 border-cyan-500/20 bg-gradient-to-br from-slate-900/80 to-slate-950/80 overflow-hidden relative">
                    <div class="absolute top-0 right-0 p-6 opacity-5 pointer-events-none">
                        <i class="fas fa-project-diagram text-[10rem] text-cyan-400"></i>
                    </div>
                    <div class="relative z-10">
                        <h3 class="text-xl font-bold text-white mb-6 flex items-center gap-3 font-[Orbitron]">
                            <i class="fas fa-lightbulb text-amber-400"></i> NEURAL INSIGHTS & CAREER ARCHITECTURE
                        </h3>
                        <div id="careerInsights" class="text-slate-300 leading-relaxed text-lg italic">
                            Analyzing core subject patterns to generate career trajectories...
                        </div>
                    </div>
                </div>

                <!-- Semester Timeline -->
                <div id="semesterTimelineContainer" class="space-y-8">
                    <!-- Dynamic semesters filled here -->
                </div>
        </section>

        <!-- 10. STUDENT MARKSHEET -->
        <section id="studentMarksheet" class="view-section hidden fade-in max-w-4xl mx-auto mt-6">

            <div class="glass-card p-12 rounded-2xl shadow-2xl relative text-white border border-white/10"
                id="printArea">
                <!-- HUD Decorative elements -->
                <div
                    class="absolute top-0 right-0 p-4 font-mono text-[10px] text-cyan-500/30 tracking-[0.5em] pointer-events-none">
                    SYSTEM_REV_V2.0</div>

                <div class="flex justify-between items-start mb-12 border-b-2 border-cyan-500/30 pb-8">
                    <div>
                        <h1 class="text-4xl font-bold text-white tracking-[0.2em] font-[Orbitron]">DATA OUTPUT</h1>
                        <p class="text-cyan-400 text-xs mt-3 uppercase tracking-[0.5em] font-bold"><span
                                id="sheetSemester"></span> | CLASSIFIED RECORD</p>
                    </div>
                    <div class="text-right print:hidden">
                        <button onclick="app.navigateTo('studentSemesterSelect')"
                            class="text-slate-400 hover:text-cyan-400 text-xs font-bold uppercase tracking-widest transition cursor-pointer">
                            <i class="fas fa-chevron-left mr-2"></i> Node Navigation
                        </button>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-x-20 gap-y-8 mb-12 text-sm">
                    <div>
                        <span class="text-slate-400 block uppercase text-xs font-bold tracking-[0.3em] mb-2">Subject
                            Name</span>
                        <span id="sheetName" class="text-2xl font-bold text-white tracking-widest"></span>
                    </div>
                    <div>
                        <span class="text-slate-400 block uppercase text-xs font-bold tracking-[0.3em] mb-2">Matrix
                            Identifier</span>
                        <span id="sheetRegNo" class="text-2xl font-bold text-cyan-400 font-mono tracking-widest"></span>
                    </div>
                </div>

                <div class="border border-white/5 rounded-xl overflow-hidden mb-12">
                    <table class="w-full border-collapse">
                        <thead>
                            <tr class="bg-white/5">
                                <th
                                    class="text-left py-4 px-6 font-bold text-cyan-400 text-xs uppercase tracking-widest">
                                    Descriptor</th>
                                <th
                                    class="text-left py-4 px-6 font-bold text-cyan-400 text-xs uppercase tracking-widest">
                                    Proto</th>
                                <th
                                    class="text-center py-4 px-6 font-bold text-cyan-400 text-xs uppercase tracking-widest">
                                    Int</th>
                                <th
                                    class="text-center py-4 px-6 font-bold text-cyan-400 text-xs uppercase tracking-widest">
                                    Ext</th>
                                <th
                                    class="text-center py-4 px-6 font-bold text-cyan-400 text-xs uppercase tracking-widest">
                                    Val</th>
                                <th
                                    class="text-center py-4 px-6 font-bold text-cyan-400 text-xs uppercase tracking-widest">
                                    Max</th>
                                <th
                                    class="text-center py-4 px-6 font-bold text-cyan-400 text-xs uppercase tracking-widest">
                                    Status</th>
                            </tr>
                        </thead>
                        <tbody id="sheetBody" class="text-slate-300 divide-y divide-white/5">
                            <!-- Dynamic Rows -->
                        </tbody>
                    </table>
                </div>

                <div class="grid grid-cols-2 gap-8 mt-12">
                    <div
                        class="bg-indigo-500/5 p-8 rounded-2xl text-center border border-indigo-500/10 shadow-[inner_0_0_20px_rgba(79,70,229,0.05)]">
                        <span
                            class="text-slate-400 block uppercase text-[10px] font-bold tracking-[0.5em] mb-3">Efficiency
                            Quotient</span>
                        <span id="sheetPercentage" class="text-4xl font-bold text-indigo-400 font-[Orbitron]"></span>
                    </div>
                    <div
                        class="bg-cyan-500/5 p-8 rounded-2xl text-center border border-cyan-500/10 shadow-[inner_0_0_20px_rgba(6,182,212,0.05)]">
                        <span class="text-slate-400 block uppercase text-[10px] font-bold tracking-[0.5em] mb-3">Tier
                            Designation</span>
                        <span id="sheetGrade" class="text-4xl font-bold text-cyan-400 font-[Orbitron]"></span>
                    </div>
                </div>
            </div>

            <div class="mt-8 text-center print:hidden mb-10">
                <button onclick="window.print()"
                    class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-3 rounded shadow-lg transition font-medium">
                    <i class="fas fa-print mr-2"></i> Print Marksheet
                </button>
            </div>
        </section>

    </main>



    <!-- Custom Portal Script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {


            // Intro Sequence: Reveal UI after delay
            setTimeout(() => {
                const title = document.getElementById('portal-title');
                const subtitle = document.getElementById('portal-subtitle');
                if (title) title.classList.add('visible');
                if (subtitle) subtitle.classList.add('visible');

                const homeModules = document.querySelectorAll('#homePage .glass-card');
                homeModules.forEach((mod, index) => {
                    setTimeout(() => {
                        mod.classList.add('visible');
                    }, 200 + (index * 150));
                });
            }, 4000); // 4 second clean robot intro

            // Aggressive Spline Emblem Removal - Enhanced Version
            const hideSplineWatermark = () => {
                // 1. Target Shadow DOM with comprehensive selectors
                document.querySelectorAll('spline-viewer').forEach(viewer => {
                    if (viewer.shadowRoot) {
                        // Inject aggressive hiding styles
                        if (!viewer.shadowRoot.querySelector('#hide-logo-style-v2')) {
                            const style = document.createElement('style');
                            style.id = 'hide-logo-style-v2';
                            style.textContent = `
                                #logo, 
                                .spline-watermark, 
                                a[href*="spline.design"], 
                                a[href*="spline"], 
                                #spline-watermark,
                                [data-logo],
                                [class*="watermark"],
                                [class*="logo"],
                                [id*="logo"],
                                a[target="_blank"],
                                .spline-watermark-container,
                                div[style*="position: absolute"][style*="bottom"],
                                div[style*="position: fixed"][style*="bottom"],
                                a[style*="position: absolute"][style*="bottom"],
                                a[style*="position: fixed"][style*="bottom"] { 
                                    display: none !important; 
                                    visibility: hidden !important; 
                                    opacity: 0 !important; 
                                    pointer-events: none !important;
                                    width: 0 !important;
                                    height: 0 !important;
                                    overflow: hidden !important;
                                }
                            `;
                            viewer.shadowRoot.appendChild(style);
                        }

                        // Remove all possible watermark elements
                        const selectors = [
                            '#logo',
                            '.spline-watermark',
                            'a[href*="spline.design"]',
                            'a[href*="spline"]',
                            'a[target="_blank"]',
                            '[data-logo]',
                            '[class*="watermark"]',
                            '[class*="logo"]',
                            '[id*="logo"]'
                        ];

                        selectors.forEach(selector => {
                            viewer.shadowRoot.querySelectorAll(selector).forEach(el => {
                                el.remove();
                            });
                        });

                        // Check all elements for "Built with Spline" text or positioned in bottom-right
                        viewer.shadowRoot.querySelectorAll('*').forEach(el => {
                            // Remove by text content
                            if (el.textContent && (
                                el.textContent.includes('Built with Spline') ||
                                el.textContent.includes('spline.design') ||
                                el.textContent.includes('Spline')
                            )) {
                                el.remove();
                            }

                            // Remove by computed style (bottom-right positioned elements)
                            const style = window.getComputedStyle(el);
                            if ((style.position === 'absolute' || style.position === 'fixed') &&
                                style.bottom !== 'auto' && style.right !== 'auto') {
                                const bottom = parseInt(style.bottom);
                                const right = parseInt(style.right);
                                if (bottom < 50 && right < 50) {
                                    el.remove();
                                }
                            }
                        });
                    }
                });

                // 2. Target Light DOM (Safety Fallback)
                document.querySelectorAll('a[href*="spline.design"], a[href*="spline"]').forEach(el => el.remove());
            };

            // Run immediately and on interval (Optimized to reduce lag)
            hideSplineWatermark();
            setInterval(hideSplineWatermark, 2000); // Check every 2 seconds instead of 50ms - Watermark is usually static after load

            // Listen for view changes to hide/show overlays
            const originalNavigate = app.navigateTo;
            app.navigateTo = function (sectionId) {
                originalNavigate.call(app, sectionId);
                if (sectionId === 'homePage') {
                    document.body.classList.remove('child-page');
                } else {
                    document.body.classList.add('child-page');
                }
            };
        });
    </script>

    <!-- Original App Script -->
    <script src="js/app.js"></script>

</body>

</html>